import e,{useState as t}from"react";import n from"prop-types";const s=function(){this.keys=new Map,this.end=!1,this.isEnd=function(){return this.end},this.setEnd=function(){this.end=!0}},r=function(){this.root=new s,this.add=function(e,t=this.root){return 0==e.length?void t.setEnd():(t.keys.has(e[0])||t.keys.set(e[0],new s),this.add(e.substr(1),t.keys.get(e[0])))},this.isWord=function(e){for(var t=this.root;e.length>1;){if(!t.keys.has(e[0]))return!1;t=t.keys.get(e[0]),e=e.substr(1)}return!(!t.keys.has(e[0])||!t.keys.get(e[0]).isEnd)},this.getWord=function(e){for(var t=this.root,n=[],s=new String;e.length>1;){if(!t.keys.has(e[0]))return!1;s+=e[0],t=t.keys.get(e[0]),e=e.substr(1)}if(t.keys.has(e[0])){s+=e[0];t=t.keys.get(e[0]);var r=function(e,t){if(1==e.end&&n.push(t),e.keys.size>0)for(let n of e.keys.keys())r(e.keys.get(n),t.concat(n))};r(t,s)}return n},this.build=function(e){for(var t=0;t<e.length;t++)this.add(e[t])}},i=n=>{const[s,i]=t([]);return e.createElement("div",null,e.createElement("input",{id:"input",type:"text",placeholder:n.placeholder,className:n.inputClassName,onFocus:()=>{n.children&&i(n.children.map((e=>e.props.children)))},onBlur:()=>{i([])},onChange:e=>(e=>{if(!n.children)return null;{let s=new r;for(var t=0;t<n.children.length;t++)s.add(n.children[t].props.children);let l=s.getWord(e.target.value);i(l)}})(e)}),s?e.createElement("div",null,e.createElement("div",{className:"options"},e.createElement("ul",{className:n.listClassName},s.map(((t,s)=>e.createElement("li",{key:s,className:n.optionsClassName,onMouseDown:e=>(e=>{let t=e.target.innerHTML;document.getElementById("input").value=t,n.handleInput(t)})(e)},t)))))):null)};i.defaultProps={placeholder:"please search options",inputClassName:"input",listClassName:"list",optionsClassName:"option",handleInput:()=>null},i.propTypes={children:n.arrayOf(n.object),handleInput:n.func};export{i as default};
